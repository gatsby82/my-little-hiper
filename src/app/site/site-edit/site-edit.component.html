<div class="edit-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Telephely szerkesztése</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <!-- Loading spinner -->
      <div *ngIf="loading" class="loading-spinner">
        <mat-spinner diameter="50"></mat-spinner>
      </div>

      <!-- Error message -->
      <div *ngIf="error" class="error-message">
        {{ error }}
      </div>

      <!-- Edit form -->
      <form [formGroup]="siteForm" *ngIf="!loading && !error" (ngSubmit)="saveSite()">
        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Név</mat-label>
            <input matInput formControlName="name" placeholder="Telephely neve">
            <mat-error *ngIf="siteForm.get('name')?.hasError('required')">
              Név megadása kötelező
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Angol név</mat-label>
            <input matInput formControlName="nameEnglish" placeholder="Telephely angol neve">
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Típus</mat-label>
            <mat-select formControlName="type">
              <mat-option *ngFor="let type of siteTypes" [value]="type.value">
                {{ type.viewValue }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="siteForm.get('type')?.hasError('required')">
              Típus kiválasztása kötelező
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Régió</mat-label>
            <input matInput formControlName="region" placeholder="Régió">
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Vármegye</mat-label>
            <input matInput formControlName="county" placeholder="Vármegye">
            <mat-error *ngIf="siteForm.get('county')?.hasError('required')">
              Vármegye megadása kötelező
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Település</mat-label>
            <input matInput formControlName="settlement" placeholder="Település">
            <mat-error *ngIf="siteForm.get('settlement')?.hasError('required')">
              Település megadása kötelező
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Irányítószám</mat-label>
            <input matInput formControlName="postalCode" placeholder="Irányítószám">
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Méret (m²)</mat-label>
            <input matInput type="number" formControlName="size" placeholder="Méret">
            <mat-error *ngIf="siteForm.get('size')?.hasError('required')">
              Méret megadása kötelező
            </mat-error>
            <mat-error *ngIf="siteForm.get('size')?.hasError('min')">
              A méretnek nagyobbnak kell lennie nullánál
            </mat-error>
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="form-field full-width">
          <mat-label>Megjegyzések</mat-label>
          <textarea matInput formControlName="notes" placeholder="Megjegyzések" rows="4"></textarea>
        </mat-form-field>
      </form>
    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-button type="button" (click)="cancel()">Mégse</button>
      <button mat-raised-button color="primary" [disabled]="siteForm.invalid || loading" (click)="saveSite()">Mentés</button>
    </mat-card-actions>
  </mat-card>
</div>
